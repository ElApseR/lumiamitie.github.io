<!DOCTYPE html>
<html>
<!--
====================================================
    __  ____  ______________  _______ ___    __ 
   / / / /  |/  / ____/   \ \/ / ___//   |  / / 
  / /_/ / /|_/ / /_  / /| |\  /\__ \/ /| | / /  
 / __  / /  / / __/ / ___ |/ /___/ / ___ |/ /___
/_/ /_/_/  /_/_/   /_/  |_/_//____/_/  |_/_____/
                                                     
====================================================
Author: Hossain Mohammad Faysal
Profile: https://www.facebook.com/hmfaysal
Version: 1.0
Description: Awesome dude, awesome life
====================================================
-->
<head>
<meta charset="utf-8">
<title>GGPLOT2 축 레이블 포맷 바꾸기</title>
<meta name="description" content="Data and Visualization">
<meta name="keywords" content="ggplot2, label">



<!-- Open Graph -->
<meta property="og:locale" content="en_US">
<meta property="og:type" content="article">
<meta property="og:title" content="ggplot2 축 레이블 포맷 바꾸기">
<meta property="og:description" content="Data and Visualization">
<meta property="og:url" content="http://lumiamitie.github.io/r/visualization/ggplot2-scale-label">
<meta property="og:site_name" content="lmnsh">
<meta property="og:image" content="http://lumiamitie.github.io/images/">





<link rel="canonical" href="http://lumiamitie.github.io/r/visualization/ggplot2-scale-label">
<link href="http://lumiamitie.github.io/feed.xml" type="application/atom+xml" rel="alternate" title="lmnsh Feed">


<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />


    <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700&amp;subset=latin,latin-ext' rel='stylesheet'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,700,800,600&amp;subset=latin,latin-ext' rel='stylesheet'>
    <link rel="stylesheet" href="http://lumiamitie.github.io/assets/css/font-awesome.min.css">
    <link rel="stylesheet" href="http://lumiamitie.github.io/assets/css/vendor/normalizeb146.css?v=77a7756db2">
    <link rel="stylesheet" href="http://lumiamitie.github.io/assets/css/vendor/foundation.minb146.css?v=77a7756db2">
    <link rel="stylesheet" href="http://lumiamitie.github.io/assets/css/styleb146.css?v=77a7756db2">
    <link rel="stylesheet" href="http://lumiamitie.github.io/assets/css/postb146.css?v=77a7756db2">
    <script src="http://lumiamitie.github.io/assets/js/vendor/modernizrb146.js?v=77a7756db2"></script>





<!-- Icons -->
<!-- 16x16 -->
    <!--
<link rel="shortcut icon" href="http://lumiamitie.github.io/favicon.ico">
    -->
<!-- 32x32 -->
<link rel="shortcut icon" href="http://lumiamitie.github.io/favicon.png">
    
<!-- 57x57 (precomposed) for iPhone 3GS, pre-2011 iPod Touch and older Android devices -->
<link rel="apple-touch-icon-precomposed" href="http://lumiamitie.github.io/images/bloglogo57.png">
<!-- 72x72 (precomposed) for 1st generation iPad, iPad 2 and iPad mini -->
<link rel="apple-touch-icon-precomposed" sizes="72x72" href="http://lumiamitie.github.io/images/bloglogo72.png">
<!-- 114x114 (precomposed) for iPhone 4, 4S, 5 and post-2011 iPod Touch -->
<link rel="apple-touch-icon-precomposed" sizes="114x114" href="http://lumiamitie.github.io/images/bloglogo114.png">
<!-- 144x144 (precomposed) for iPad 3rd and 4th generation -->
<link rel="apple-touch-icon-precomposed" sizes="144x144" href="http://lumiamitie.github.io/images/bloglogo144.png">

</head>
<body class="post-template" itemscope itemtype="http://schema.org/WebPage">  

<main id="summer-post-container" class="summer-post-container intro-effect-sliced" role="main">
    
    
        <header class="summer-post-header">
            <div class="bg-img"></div>
            
            <div class="summer-post-menu-header">
                
                    <a class="summer-blog-logo" href="http://lumiamitie.github.io">
                        <img src="http://lumiamitie.github.io/images/bloglogo150.png" alt="Blog Logo" />
                    </a>
                
                
                
                <div class="summer-blog-menu">      
    <div class="summer-mobile-menu show-for-small">
        <a href="#"><i class="fa fa-bars"></i></a>
    </div>
    <ul class="summer-menu">
        <li class="summer-mobile-close-btn show-for-small text-right">
            <a href="#"><i class="fa fa-times"></i></a>
        </li>

            <li>
                    <a href="http://lumiamitie.github.io/">Home</a>
                 </li>

            <li>
                    <a href="http://lumiamitie.github.io/featured">Featured Posts</a>
                 </li>

            <li>
                    <a href="http://lumiamitie.github.io/categories">Categories</a>
                 </li>

            <li>
                    <a href="http://lumiamitie.github.io/mino">About</a>
                 </li>
            
           <li><a href="http://lumiamitie.github.io/feed.xml" title="Atom/RSS feed"><i class="icon-rss"></i> Feed</a></li>
    </ul>

</div>
            </div>
            <div class="summer-post-title bg-check">
                <h1>ggplot2 축 레이블 포맷 바꾸기</h1>
                <p>by <strong>Minho Lee</strong> &#8212; on <a href="http://lumiamitie.github.io/tags/index.html#ggplot2" data-toggle="tooltip" title="Posts tagged with ggplot2" rel="tag">ggplot2</a>&nbsp;&comma;&nbsp;<a href="http://lumiamitie.github.io/tags/index.html#label" data-toggle="tooltip" title="Posts tagged with label" rel="tag">label</a> <strong><time datetime="2016-08-10T00:00:00+09:00">10 Aug 2016</time></strong></p>
            </div>
            <div class="bg-img"></div>
        </header>
        <button class="trigger bg-check" data-info="Read more"><span>Trigger</span></button>
        
        <article class="summer-post-content post">
            <div><p><img src="/images/macphoto.jpg" alt="cover-image"></p>

<h1 id="축-레이블-포맷-바꾸기">축 레이블 포맷 바꾸기</h1>

<p>그냥 혼자서 그래프를 볼 때에는 크게 중요하지 않을 수 있지만, 다른 사람에게 전달하고자 하는 그래프를 작성할 때 중요한 것 중 하나가 축의 레이블 포맷이다. x축, y축이 각각 어느 정도의 값을 나타내는 것인지 명확하게 나타내지 않는다면 보는 사람을 혼란스럽게 만들 우려가 있다. (그리고, 미래의 나를 위해 친절을 베푼다고 생각하자. 하루만 지나도 내그래프를 내가 이해하지 못하는 경우가 종종 발생한다) 따라서 명확한 의미 전달을 위해, 축의 눈금값(밑에서는 계속 레이블이라고 부를 것이다)의 포맷을 지정하는 방법을 알아보려고 한다! </p>

<p><br /></p>

<hr>

<p>라이브러리는 ggplot2를 사용하며, 해당 패키지 내부의 <code>diamonds</code>, <code>economics</code> 데이터를 실습에 사용할 것이다.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># ggplot2 2.1.0</span>
<span class="kn">library</span><span class="p">(</span>ggplot2<span class="p">)</span>
</code></pre></div>
<p><br />
<br /></p>

<h2 id="comma로-구분하는-포맷-적용하기">comma로 구분하는 포맷 적용하기</h2>

<p>ggplot2에서는 수치가 커질 경우, 수치를 자동으로 부동소수점으로 변환하여 표기한다.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">df_largenum <span class="o">=</span> <span class="kt">data.frame</span><span class="p">(</span>
  label <span class="o">=</span> <span class="kc">letters</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">],</span>
  num <span class="o">=</span> <span class="kt">c</span><span class="p">(</span><span class="m">100000000</span><span class="p">,</span> <span class="m">3000000</span><span class="p">,</span> <span class="m">50000000</span><span class="p">,</span> <span class="m">80000000</span><span class="p">,</span> <span class="m">100000000</span><span class="p">)</span>
<span class="p">)</span>

ggplot<span class="p">(</span>df_largenum<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> label<span class="p">,</span> y <span class="o">=</span> num<span class="p">))</span> <span class="o">+</span>
  geom_bar<span class="p">(</span>stat <span class="o">=</span> <span class="s">&#39;identity&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img src="/images/post_image/ggplot2_scale_label/unnamed-chunk-2-1.png" alt="">&lt;!&ndash; &ndash;&gt;</p>

<p><br /></p>

<p>부동소수점 표기를 원하지 않을 경우 label 표기에 대한 함수를 지정해주면 원하는 형식으로 값을 볼 수 있다. 만약 콤마(,)로 구분된 숫자 표기를 원한다면 scales 패키지의 <code>comma</code> 함수를 사용하면 된다.</p>

<p>y축의 continuous한 숫자에 대한 scale 변경이므로, <code>scale_y_continuous</code> 함수에서 적용한다.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">ggplot<span class="p">(</span>df_largenum<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> label<span class="p">,</span> y <span class="o">=</span> num<span class="p">))</span> <span class="o">+</span>
  geom_bar<span class="p">(</span>stat <span class="o">=</span> <span class="s">&#39;identity&#39;</span><span class="p">)</span> <span class="o">+</span>
  scale_y_continuous<span class="p">(</span>labels <span class="o">=</span> scales<span class="o">::</span>comma<span class="p">)</span>
</code></pre></div>
<p><img src="/images/post_image/ggplot2_scale_label/unnamed-chunk-3-1.png" alt="">&lt;!&ndash; &ndash;&gt;</p>

<p><br /></p>

<p><code>scales</code> 패키지에는 여러 가지 유용한 함수들이 있다. 모든 함수를 살펴보면 좋겠지만 이 글에서는 <code>comma</code>와 <code>percent</code>만 간단하게 다룬다.</p>

<p><br /></p>

<hr>

<h2 id="한글-숫자단위로-수치-나타내기-custom-label">한글 숫자단위로 수치 나타내기 (Custom Label)</h2>

<p>K, B 등의 영문자로 단위를 나타내거나 만, 억 등 자신이 원하는 단위로 눈금을 나타내고 싶은 경우가 있다. 특히나 매출같은 경우 단위가 1억원을 훌쩍 넘기는 상황도 많이 발생한다. 한글로 수치를 표현하려면 어떻게 해야할까?  </p>

<p><br /></p>

<p><code>100,000,000</code> 이 아니라 <code>1억</code> 으로 표시하려면 어떻게 해야하는지 살펴보자!</p>

<p><br /></p>

<p>우선 economics 데이터로 간단한 그래프를 그린다. y축을 보면 20만부터 32만까지 값이 존재한다. <code>200000</code>을 <code>20만</code>으로 변경해보자!</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">ggplot<span class="p">(</span>economics<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> <span class="kp">date</span><span class="p">,</span> y <span class="o">=</span> pop<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span>
</code></pre></div>
<p><img src="/images/post_image/ggplot2_scale_label/unnamed-chunk-4-1.png" alt="">&lt;!&ndash; &ndash;&gt;</p>

<p><br /></p>

<p>사용자가 임의로 지정하는 레이블 함수를 만들 수 있다. 눈금에 해당하는 수치를 받아서 원하는 표기의 문자열을 반환하는 함수를 만들면 된다. y축의 숫자를 만단위로 표시하는 함수를 만들고, scale에 적용하자.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">label_ko_num <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>num<span class="p">)</span> <span class="p">{</span>
  ko_num <span class="o">=</span> <span class="kr">function</span><span class="p">(</span>x<span class="p">)</span> <span class="p">{</span>
    new_num <span class="o">=</span> x <span class="o">%/%</span> <span class="m">10000</span>
    <span class="kr">return</span><span class="p">(</span><span class="kp">paste</span><span class="p">(</span>new_num<span class="p">,</span> <span class="s">&#39;만&#39;</span><span class="p">,</span> sep <span class="o">=</span> <span class="s">&#39;&#39;</span><span class="p">))</span>
  <span class="p">}</span>
  <span class="c1"># vapply를 쓰고 싶지만 가끔 문자열대신 NA가 출력되는 경우도 있으니 </span>
  <span class="c1"># 여기서는 간단하게 sapply를 적용</span>
  <span class="kr">return</span><span class="p">(</span><span class="kp">sapply</span><span class="p">(</span>num<span class="p">,</span> ko_num<span class="p">))</span>
<span class="p">}</span>
</code></pre></div>
<p><br /></p>

<p>그러면 아래 그래프와 같이 한글 숫자표기가 적용된 눈금을 확인할 수 있다.</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">ggplot<span class="p">(</span>economics<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> <span class="kp">date</span><span class="p">,</span> y <span class="o">=</span> pop<span class="p">))</span> <span class="o">+</span>
  geom_line<span class="p">()</span> <span class="o">+</span>
  scale_y_continuous<span class="p">(</span>labels <span class="o">=</span> label_ko_num<span class="p">)</span>
</code></pre></div>
<p><img src="/images/post_image/ggplot2_scale_label/unnamed-chunk-6-1.png" alt="">&lt;!&ndash; &ndash;&gt;</p>

<p><br /></p>

<hr>

<p>범용적인 스케일 함수를 만들고 싶다면 여러 가지 상황을 고려하여 함수를 만들어야 한다. 하지만 해당 그래프에 대해서만 적용해도 상관없다면 이렇게 상황에 맞는 간단한 함수를 만들어 쓰면 된다.</p>

<p><br />
<br /></p>

<h2 id="백분율-포맷-적용하기">백분율(%) 포맷 적용하기</h2>

<p>아래 그래프의 y축에서는 0부터 1 사이의 소수로 비율을 표시하고 있다</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">ggplot<span class="p">(</span>diamonds<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> <span class="kp">cut</span><span class="p">,</span> fill <span class="o">=</span> color<span class="p">))</span> <span class="o">+</span>
  geom_bar<span class="p">(</span>position <span class="o">=</span> <span class="s">&#39;fill&#39;</span><span class="p">)</span> <span class="o">+</span>
  scale_fill_brewer<span class="p">(</span>palette <span class="o">=</span> <span class="s">&#39;Paired&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img src="/images/post_image/ggplot2_scale_label/unnamed-chunk-7-1.png" alt="">&lt;!&ndash; &ndash;&gt;</p>

<p><br /></p>

<p>직접 %를 적용하는 함수를 만들어도 좋겠지만 <code>scales::percent</code> 함수를 바로 적용해보자</p>
<div class="highlight"><pre><code class="language-r" data-lang="r">ggplot<span class="p">(</span>diamonds<span class="p">,</span> aes<span class="p">(</span>x <span class="o">=</span> <span class="kp">cut</span><span class="p">,</span> fill <span class="o">=</span> color<span class="p">))</span> <span class="o">+</span>
  geom_bar<span class="p">(</span>position <span class="o">=</span> <span class="s">&#39;fill&#39;</span><span class="p">)</span> <span class="o">+</span>
  scale_y_continuous<span class="p">(</span>labels <span class="o">=</span> scales<span class="o">::</span>percent<span class="p">)</span> <span class="o">+</span>
  scale_fill_brewer<span class="p">(</span>palette <span class="o">=</span> <span class="s">&#39;Paired&#39;</span><span class="p">)</span>
</code></pre></div>
<p><img src="/images/post_image/ggplot2_scale_label/unnamed-chunk-8-1.png" alt="">&lt;!&ndash; &ndash;&gt;</p>

<p><br />
<br /></p>

<hr>

<p>평소에는 크게 중요하게 생각하지 않았지만 막상 일을 하면서 중요하다고 느꼈던 것이 바로 이런 것들이었다. 제목, 축, 범례 등등. 결국 그래프를 처음 보는 사람도 한 눈에 보고 이해할 수 있으려면 친절한 &lsquo;가이드&#39;가 필요하다. 생각보다 손이 많이가고 귀찮기 때문에 건드리기 싫은 영역이긴 하지만, 좋은 그래프를 위해 한 번만 더 신경써보자.</p>

            </div>
        </article>
        <div class="cf"></div>
        <div class="row text-center">
            <section class="summer-post-share">
                <a class="twitter-icon" href="https://twitter.com/intent/tweet?text=&quot;ggplot2 축 레이블 포맷 바꾸기&quot;%20http://lumiamitie.github.io/r/visualization/ggplot2-scale-label%20via%20&#64;"
                    onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;" title="Share on Twitter">
                    <i class="fa fa-twitter"></i>
                </a>
                <a class="facebook-icon" href="https://www.facebook.com/sharer/sharer.php?u=http://lumiamitie.github.io/r/visualization/ggplot2-scale-label"
                    onclick="window.open(this.href, 'facebook-share','width=580,height=296');return false;" title="Share on Facebook">
                    <i class="fa fa-facebook"></i>
                </a>
                <a class="google-icon" href="https://plus.google.com/share?url=http://lumiamitie.github.io/r/visualization/ggplot2-scale-label"
                   onclick="window.open(this.href, 'google-plus-share', 'width=490,height=530');return false;" title="Share on Google+">
                    <i class="fa fa-google-plus"></i>
                </a>
            </section>
        </div>
        <div class="cf"></div>
        
            <div class="summer-author-info">
                <div class="row">
                    <section class="summer-post-author small-12 columns">
                        
                            <img src="http://lumiamitie.github.io/images/mino.jpg" class="summer-post-author-avatar" alt="Minho Lee's photo">
                        
                        
                            <span class="author-label">Author</span>
                            <h1>Minho Lee</h1>
                        
                        
                            <p><a href="mailto:lumiamitie@email.com" class="author-website">lumiamitie@email.com</a></p>
                        
                        
                            <p>Mind the Gap!</p>
                        
                    </section>
                </div>
            </div> 
        
        <div class="cf"></div>
        
        <div class="cf"></div>

    <footer class="summer-site-footer">
    <div class="copyright">
         <section>All content copyright <a href="http://lumiamitie.github.io">Minho Lee</a> &copy; 2016 &bull; All rights reserved.</section>
         <section>Proudly published with <a class="icon-ghost" href="https://jekyllrb.com/">Jekyll</a></section>
    </div>
    <div class="social-icons">
        
        
        
        
        <a href="http://instagram.com/lmnsh_">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-instagram fa-stack-1x"></i>
            </span>
        </a>
        
        
        <a href="http://github.com/lumiamitie">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x fa-inverse"></i>
                <i class="fa fa-github fa-stack-1x"></i>
            </span>
        </a>
        
        
    </div>
    
    <div class="cf"></div>
</footer> 
</main>    
    <script src="http://lumiamitie.github.io/assets/js/public/jqueryb146.js?v=77a7756db2"></script>

    
    <script src="http://lumiamitie.github.io/assets/js/vendor/fastclickb146.js?v=77a7756db2"></script>
    <script src="http://lumiamitie.github.io/assets/js/vendor/foundation.minb146.js?v=77a7756db2"></script>
    <script src="http://lumiamitie.github.io/assets/js/vendor/background-checkb146.js?v=77a7756db2"></script>
    <script src="http://lumiamitie.github.io/assets/js/vendor/post-header-animationsb146.js?v=77a7756db2"></script>
    <script src="http://lumiamitie.github.io/assets/js/summerb146.js?v=77a7756db2"></script>

	<link rel="stylesheet" href="http://lumiamitie.github.io/assets/highlight/default.css">
	<script src="http://lumiamitie.github.io/assets/highlight/highlight.pack.js"></script>
	<script>hljs.initHighlightingOnLoad();</script>
	

<!-- Asynchronous Google Analytics snippet -->
<script>
/*
  var _gaq = _gaq || [];
  var pluginUrl = 
 '//www.google-analytics.com/plugins/ga/inpage_linkid.js';
  _gaq.push(['_require', 'inpage_linkid', pluginUrl]);
  _gaq.push(['_setAccount', 'UA-69341391-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://' : 'http://') + 'stats.g.doubleclick.net/dc.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
*/
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-69341391-1', 'auto');
  ga('send', 'pageview');

</script>
 
</body>
</html>
